# 后台任务

有时候我们希望将任务放到后台，从而在不影响前台终端操作的情况下，让耗时任务能够继续执行

## 查看后台的任务

```shell
$ jobs
```

## 将前台任务转为后台


将正在运行的任务放到后台，比如正在运行一个 scp 或者 rsync 拷贝文件。此时执行 `ctrl + z` 将任务挂起。然后再使用 bg 命令让其在后台执行。

```
$ jobs # 查看任务号
$ bg %<任务号>
```
此时用 jobs 命令查看，就可以看到其在后台执行。


## 将后台任务转前台

使用 fg 命令将后台任务转前台。

```shell
$ fg %<任务号>
```


## 直接在后台运行任务

当知道某个任务比较耗时，就可以在运行的时候直接作为后台任务运行。我们可以使用 `nohup <指令> &` 来运行指令。例如

```shell
$ nohup bash  run.sh 2>&1 & 
[1] 31520
nohup: ignoring input and appending output to 'nohup.out'

$ tailf nohup.out 
```
其中31520表示作业id。如果不加nohup, 当终端退出时，run.sh对应的进程会收到SIGHUP信号，而进程对SIGHUP信号的默认处理方式是终止，这显然不是我们想要的。而加上nohup之后，run.sh对应的进程会忽略SIGHUP信号，即终端退出并不影响进程继续运行.