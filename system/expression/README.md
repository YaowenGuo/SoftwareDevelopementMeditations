# 数学运算

### 数据运算


学习语言的各个细节繁杂而无趣，也不能提高编程水平，只有从计算机原理的本质去理解，反而能够避免数据类型使用的坑。

无符号数：二进制表示
有符号数：二进制补码
浮点数：实数科学计数法以2为基的实现

无论是何种类型，都离不开存贮的的限制。因为机器的二进制表示是有位数限制的，以 int 型为例，大多数语言中它是四个字节。计算表达式 `200 * 300 * 400 * 500` 计算结果 `-884901888`。这在真实世界是不可能的，因为正数乘法不可能得到负值，然而却在计算机中普遍存在。32 位的有符号表示范围为 2^(31) ~ 2^(31) - 1，了解了这些之后，我们就会发现编写程序需要小心谨慎。

例如计算两个数字的平均数不能简单的 `(a + b) / 2`，因为 a 和 b 的和可能超过 a 的数据类型的表示范围，因此正确的计算方法应该是 `(a - b) / 2 + b`。
然而这种运算不能简单的运用于无符号数，因为减法运算会产生负值，这是无符号数无法表示的。

Python 作为解释型语言，淡化了数字的字节限制，数字大小仅受内存限制。这也是其运行缓慢的原因。

#### 浮点数运算

浮点数的数学运算具有完全不同的算数属性，一些列整数的运算始终为正数，甚至溢出产生 +∞。由于浮点数预算精度有限，其运算不符合结合律。例如

```
(3.14+1e20)-1e20 = 0
```

```
3.14+(1e20–1e20) = 3.14
```

整数和浮点算术的差异源于它们存储数据表示的方式的差异。整数编码可以表示较小范围的值，精确能得到有效保证。而浮点编码可以表示较大范围的值，但只能近似值。


### 浮点数的移位运算没有实际的意义

整数的移位运算代表乘/除 2 的次幂，而浮点数移位没有任何意义。但是有些编译器并不给出错误，只是一个简单的警告。