# 视频编解码

ITU-T(): H261 ~ H263  

ISO : MPEG

ITU-T+ISO 合作： H264/AVC, H265/HEVC、H266/VCC


## 帧内编码

### 分块（宏块）

ITU-T 首创将图片分为 `n*n` 像素的额块，称为宏块。一帧内的宏块大小不一定，例如 H264 的宏块可以为 16*16、8*8、4*4、16*8....。

宏块越大，相同条件下，压缩率越高，文件越小。


I帧、B帧、P帧

I帧保留整个图像的信息。P 帧保留差异信息，包括运动矢量和差异信息。B 帧保存 I 帧到 P 帧运动矢量的百分比信息。因此B帧最小，可以只有几K的数据。解码时，通过 I 帧和P 帧的信息，还原他们之间的 B 帧图像。

```
```

与 I 帧相似程度程度 95% 以上编码成 B 帧，相似程度 70% 以上编码成 P 帧。

？ 相似 70% ~ 95% 之间都编码成 P 帧？ P 帧之后再编码是和谁比较？

I帧和P帧之间的 B帧会在P帧之后排列，因为在获取到 I 帧和 P 帧之后才能做差值计算 B 帧的图像。
帧编码顺序
```
I1B1B2B3P1
```
输出顺序，也是文件存储和网络传输顺序。该顺序称为 `码流顺序`。B 帧的码流顺序并不一定按先后顺序排列，可能是 `B2B1B3`，具体的播放顺序由 PTS 来控制。
```
I1P1B1B2B3
```

- DTS（Decoding Time Stamp）：即解码时间戳，这个时间戳的意义在于告诉播放器该在什么时候解码这一帧的数据。

- PTS（Presentation Time Stamp）：即显示时间戳，这个时间戳用来告诉播放器该在什么时候显示这一帧的数据。

需要注意的是：虽然 DTS、PTS 是用于指导播放端的行为，但它们是在编码的时候由编码器生成的。


GOP: 从 I帧开始到下一个 I 帧之前的图像序列。在一个 GOP 中只有一个 I 帧。


## 帧间编码
