# æ•°æ®ç±»å‹

## (æ ‡é‡ scalar)


ç”±äº Rust æ˜¯ä¸€ç§ç³»ç»Ÿçº§å˜æˆè¯­è¨€ï¼Œä¸ºäº†æ›´å¥½çš„ç†è§£æ•°æ®çš„å­˜å‚¨ï¼ŒRust æŠ›å¼ƒäº†å¸¸ç”¨æ•°æ®è¯­è¨€å„ç§æ•°æ®ç±»å‹çš„æ¦‚å¿µï¼Œç›´æ¥ä½¿ç”¨ä½æ¥è¡¨ç¤ºæ•°æ®ç±»å‹ã€‚ç®€æ´è€Œæœ‰è§„å¾‹ï¼š

å››ç§ç±»å‹çš„æ•°æ®: integers, floating-point numbers, Booleans, and characters. 

å…¶ä¸­æ•´å½¢æœ‰ï¼š

| Length |	Signed | Unsigned |
| ------ | ------- | -------- |
| 8-bit	 |  i8	   | u8       |
| 16-bit |	i16	   | u16      |
| 32-bit |	i32	   | u32      |
| 64-bit |	i64	   | u64      |
| 128-bit|	i128   | u12      |
| arch	 |  isize  | usi      |

å¦å¤–ï¼Œisizeå’Œusizeç±»å‹å–å†³äºæ‚¨çš„ç¨‹åºè¿è¡Œçš„è®¡ç®—æœºç±»å‹ï¼šå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯64ä½ä½“ç³»ç»“æ„ï¼Œåˆ™ä¸º64ä½ï¼›å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯32ä½ä½“ç³»ç»“æ„ï¼Œåˆ™ä¸º32ä½ã€‚

Rust é»˜è®¤æ•´æ•°ç±»å‹çš„é»˜è®¤è®¾ç½®ä¸ºi32ï¼šå³ä½¿åœ¨64ä½ç³»ç»Ÿä¸Šï¼Œè¿™ç§ç±»å‹é€šå¸¸ä¹Ÿæ˜¯æœ€å¿«çš„ã€‚ æ‚¨è¦ä½¿ç”¨isizeæˆ–usizeçš„ä¸»è¦æƒ…å†µæ˜¯åœ¨å¯¹æŸç§é›†åˆè¿›è¡Œç´¢å¼•æ—¶ã€‚

### æµ®ç‚¹ç±»å‹

f32 å’Œ f64.

é»˜è®¤æ˜¯ 64 ä¸ºæµ®ç‚¹ç±»å‹ï¼Œå› ä¸ºåœ¨ç°ä»£è®¡ç®—æœºä¸Šï¼Œä¸¤è€…é€Ÿåº¦å·®ä¸å¤šï¼Œä½†ç²¾åº¦æ›´é«˜ã€‚

```rust
fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}
```

### å¸ƒå°”ç±»å‹

true å’Œ false

### å­—ç¬¦ç±»å‹

Rustâ€™s char type is four bytes in size and represents a Unicode Scalar Valueã€‚

```rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';
}
```

### å•å…ƒç±»å‹ (Unit type)

Unit type ä»…æœ‰ä¸€ä¸ªå€¼ï¼Œå³ (); å•å…ƒç±»å‹ç”¨äºè¡¨ç¤ºæ²¡æœ‰å€¼ï¼Œç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ void; 

Everything in Rust is an expression, and expressions that return "nothing" actually return (). The compiler will give an error if you have a function without a return type but return something other than () anyway. For example

1. unit typeæ˜¯ä¸€ä¸ªç±»å‹ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå€¼ï¼Œéƒ½å†™æˆå°æ‹¬å·()
å•å…ƒç±»å‹()ç±»ä¼¼c/c++/javaè¯­è¨€ä¸­çš„voidã€‚å½“ä¸€ä¸ªå‡½æ•°å¹¶ä¸éœ€è¦è¿”å›å€¼çš„æ—¶å€™ï¼Œc/c++/javaä¸­å‡½æ•°è¿”å›voidï¼Œruståˆ™è¿”å›()ã€‚ä½†è¯­æ³•å±‚é¢ä¸Šï¼Œvoidä»…ä»…åªæ˜¯ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹æ²¡æœ‰ä»»ä½•å€¼;è€Œå•ä½ç±»å‹()æ—¢æ˜¯ä¸€ä¸ªç±»å‹ï¼ŒåŒæ—¶åˆæ˜¯è¯¥ç±»å‹çš„å€¼ã€‚

2. å•å…ƒç±»å‹()ä¹Ÿç±»ä¼¼c/c++/javaä¸­çš„nullï¼Œä½†å´æœ‰å¾ˆå¤§ä¸åŒã€‚ nullæ˜¯ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œå¯ä»¥èµ‹ç»™ä¸å¯ç±»å‹çš„å€¼ï¼Œä¾‹å¦‚javaä¸­çš„å¯¹è±¡ï¼Œcä¸­æŒ‡å‘structå®ä¾‹çš„æŒ‡é’ˆï¼Œc++ä¸­çš„å¯¹è±¡æŒ‡é’ˆã€‚ä½†åœ¨rustä¸­ï¼Œ()ä¸å¯ä»¥èµ‹å€¼ç»™é™¤å•å…ƒç±»å‹å¤–çš„å…¶å®ƒçš„ç±»å‹çš„å˜é‡ï¼Œ()åªèƒ½èµ‹å€¼ç»™()ã€‚
3. Rustæ ‡å‡†åº“ä¸­ä½¿ç”¨å•å…ƒç±»å‹()çš„ä¸€ä¸ªä¾‹å­æ˜¯HashSetã€‚ä¸€ä¸ªHashSetåªä¸è¿‡æ˜¯HashMapçš„ä¸€ä¸ªéå¸¸ç®€å•åœ°åŒ…è£¹ï¼Œå†™ä½œï¼šHashMap<T, ()>ã€‚HashMapçš„ç¬¬äºŒä¸ªæ³›å‹ç±»å‹å‚æ•°å³ç”¨äº†å•å…ƒç±»å‹()

4. å¯ä»¥ç”¨Result<(), MyErrorType>ä»£æ›¿Optionï¼ŒæŸäº›å¼€å‘è€…è®¤ä¸ºResult<(), MyErrorType>è¯­ä¹‰ä¸Šèƒ½æ›´ç®€æ˜åœ°è¡¨ç¤ºä¸€ä¸ªâ€œç»“æœâ€ã€‚

```rust
fn f() {
    1i32 // error: mismatched types: expected `()` but found `int`
}
```



## å¤åˆ compound

Rust åŸç”Ÿæ”¯æŒä¸¤ç§å¤åˆç±»å‹ï¼šå…ƒç¥–ï¼Œæ•°ç»„

### å…ƒç»„

- é•¿åº¦ä¸å¯å˜
- æ•°æ®ç±»å‹ä¸ä¸€å®šç›¸åŒã€‚
- å¯ä»¥è§£æ„

```rust
fn main() {
    let tup = (500, 6.4, 1);

    let (x, y, z) = tup;

    println!("The value of y is: {}", y);

    let five_hundred = tup.0;

    let six_point_four = tup.1;

    let one = tup.2;
}
```

### æ•°ç»„

- é•¿åº¦ä¸å¯å˜
- æ•°æ®ç±»å‹å¿…é¡»ç›¸åŒ
- æ¯ä¸€é¡¹è¯¾æ›´æ”¹

å¯ä»¥åƒå¦‚ä¸‹çš„æ–¹å¼æ¥å£°æ˜ä¸€å®šæ•°é‡çš„æ•°ç»„ã€‚

```rust
let months = ["January", "February", "March", "April", "May", "June", "July",
              "August", "September", "October", "November", "December"];

let a: [i32; 5];

let a = [3; 5]; // ç”³è¯·é•¿åº¦ä¸º 5 çš„æ•°ç»„ï¼Œå¹¶ä¸”å…¨éƒ¨èµ‹å€¼ä¸º 3.
```

**ä¸è®¸å¤šä½çº§è¯­è¨€ä¸åŒï¼ŒRust ä¼šæ£€æŸ¥ç´¢å¼•è®¿é—®æ˜¯å¦è¶Šç•Œï¼Œä¸€æ—¦è¶Šç•Œå°†å¯¼è‡´ç¨‹åºå´©æºƒã€‚è¿™æ˜¯ Rust é¿å…å†…å­˜æº¢å‡ºè®¿é—®ï¼Œä¿è¯å®‰å…¨çš„æ–¹å¼ä¹‹ä¸€ã€‚å†…å­˜æº¢å‡ºæ˜¯ C/C++ å†…å­˜æ”»å‡»çš„æ–¹å¼ä¹‹ä¸€ã€‚**


## è¯­å¥(Statement)å’Œè¡¨è¾¾å¼(expression)

Rust æ˜¯ä¸€ä¸­åŸºäºè¡¨è¾¾å¼çš„è¯­è¨€ã€‚è¡¨è¾¾å¼å’Œè¯­å¥æœ‰ç€æ˜æ˜¾çš„åŒºåˆ«ã€‚

- è¯­å¥æ˜¯æ‰§è¡ŒæŸäº›æ“ä½œä¸”ä¸å…·æœ‰è¿”å›å€¼ã€‚ è¡¨è¾¾å¼åˆ™è®¡ç®—ç»“æœä¸ºç»“æœå€¼ã€‚è¡¨è¾¾å¼æœ‰è¿”å›å€¼ï¼Œè¯­å¥æ²¡æœ‰ã€‚

å£°æ˜å˜é‡æ˜¯ä¸€ç§è¯­å¥

```rust
let y = 6;
// ä¸åˆæ³•ï¼Œlet y ä¸å…·æœ‰è¿”å›å€¼ã€‚
let x = (let y = 6);
```

å¤§å¤šæ•°æ“ä½œéƒ½æ˜¯è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ç®—æ•°è¿ç®—ã€‚

```rust
let y = {
    let x = 3;
    x + 1 // æ³¨æ„æ²¡æœ‰åˆ†å·ï¼Œå¦åˆ™å°†å˜æˆè¯­å¥ã€‚
};
```

- è¡¨è¾¾å¼ä¸åŒ…æ‹¬ç»“å°¾åˆ†å·ã€‚æ·»åŠ åˆ†å·å°†è¡¨è¾¾å¼å˜æˆè¯­å¥ã€‚

- è¡¨è¾¾å¼å¯ä»¥ä¸ä½¿ç”¨ `return` å…³é”®å­—ï¼Œåœ¨å‡½æ•°æœ€åä¸€æ ·æ—¶ï¼Œè€Œè‡ªåŠ¨ä½œä¸ºè¿”å›å€¼ã€‚

```rust
fn five() -> i32 {
    5
}

// æˆ–è€…
fn five() -> i32 {
    return 5; // æ³¨æ„åˆ†å·ã€‚
}

```

## è‡ªå®šä¹‰

ä¸‰ç§

1. struct
    1. struct
    2. tuple struct
    3. unit-like struct
2. enum

3. trait object

